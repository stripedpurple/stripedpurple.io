---
import type { HTMLAttributes } from 'astro/types'
import type { BaseColors } from '../../types/colors'
import { getClasses } from '../../untils/getClasses'

interface Props extends HTMLAttributes<'a'>{
    img: string
    title: string
    description: string
    to: string
    titleColor?: BaseColors
}

const {img, title, description, to, titleColor = 'pink',  ...props} = Astro.props as Props

let titleColorClass = getClasses({
    "before:bg-amber-600": titleColor === "amber",
    "before:bg-blue-600": titleColor === "blue",
    "before:bg-cyan-600": titleColor === "cyan",
    "before:bg-emerald-600": titleColor === "emerald",
    "before:bg-fuchsia-600": titleColor === "fuchsia",
    "before:bg-gray-600": titleColor === "gray",
    "before:bg-green-600": titleColor === "green",
    "before:bg-indigo-600": titleColor === "indigo",
    "before:bg-lime-600": titleColor === "lime",
    "before:bg-neutral-600": titleColor === "neutral",
    "before:bg-orange-600": titleColor === "orange",
    "before:bg-pink-600": titleColor === "pink",
    "before:bg-purple-600": titleColor === "purple",
    "before:bg-red-600": titleColor === "red",
    "before:bg-rose-600": titleColor === "rose",
    "before:bg-sky-600": titleColor === "sky",
    "before:bg-slate-600": titleColor === "slate",
    "before:bg-stone-600": titleColor === "stone",
    "before:bg-teal-600": titleColor === "teal",
    "before:bg-violet-600": titleColor === "violet",
    "before:bg-yellow-500": titleColor === "yellow",
    "before:bg-zinc-600": titleColor === "zinc",
    "before:bg-transparent-600": titleColor === "transparent",
    "before:bg-black-600": titleColor === "black",
    "before:bg-white-600": titleColor === "white",
    "before:bg-inherit-600": titleColor === "inherit",
    "before:bg-current-600": titleColor === "current",
})
---

<a href={to} class={`card group ${props.class}`} target="_blank" rel="noopener">
    <span class="group-hover:scale-110 card-img" style={`background-image: url(${img})`}></span>
    <span class="card-info">
        <dt class={`card-title ${titleColorClass}`}>{title}</dt>
        <dd class="card-description group-hover:truncate-none">{description}</dd>
    </span>
</a>


<style>
    .card {
        @apply h-full block w-full relative sm:min-h-[5vw] min-h-[30vh] overflow-hidden;
    }

    .card-img {
        @apply block inset-0 bg-cover bg-no-repeat bg-center absolute transition-all ease-in-out duration-200;
    }

    .card-info {
        @apply block p-4 sm:p-8 absolute bottom-0 bg-gradient-to-t from-black to-transparent w-full mt-24 select-none z-10;
    }

    .card-title {
        @apply text-lg sm:text-2xl lg:text-3xl font-bold uppercase title mb-3 relative inline-block before:absolute before:-inset-1 before:z-[-1] before:block before:-skew-x-12 before:-translate-x-1 before:translate-y-2  before:scale-y-50 ;
    }
    .card-description {
        @apply text-gray-100 sm:text-xl lg:text-2xl truncate md:truncate-none transition-all;
    }
</style>